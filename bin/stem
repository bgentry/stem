#!/usr/bin/env ruby

$:.unshift File.dirname(__FILE__) + "/../lib"
require 'greenfield'

c = Swirl::EC2.new

CONFIG = ARGV[0]
USERDATA = ARGV[1]

config = JSON.parse File.read CONFIG
throw "No config" unless config

userdata = File.read(USERDATA) if USERDATA

instanceId = GreenField.create(config, userdata)

puts instanceId
